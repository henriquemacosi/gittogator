(function(){var e={Etag:1,"Last-Modified":1,"Content-Length":1,"Content-Type":1},t={},a={},o={},s={},n=1e3,r=false,i={html:1,css:1,js:1};var c={heartbeat:function(){if(document.body){if(!r)c.loadresources();c.checkForChanges()}setTimeout(c.heartbeat,n)},loadresources:function(){function e(e){var t=document.location,a=new RegExp("^\\.|^/(?!/)|^[\\w]((?!://).)*$|"+t.protocol+"//"+t.host);return e.match(a)}var a=document.getElementsByTagName("script"),s=document.getElementsByTagName("link"),n=[];for(var l=0;l<a.length;l++){var d=a[l],u=d.getAttribute("src");if(u&&e(u))n.push(u);if(u&&u.match(/\blive.js#/)){for(var f in i)i[f]=u.match("[#,|]"+f)!=null;if(u.match("notify"))alert("Live.js is loaded.")}}if(!i.js)n=[];if(i.html)n.push(document.location.href);for(var l=0;l<s.length&&i.css;l++){var h=s[l],m=h.getAttribute("rel"),p=h.getAttribute("href",2);if(p&&m&&m.match(new RegExp("stylesheet","i"))&&e(p)){n.push(p);o[p]=h}}for(var l=0;l<n.length;l++){var v=n[l];c.getHead(v,function(e,a){t[e]=a})}var g=document.getElementsByTagName("head")[0],w=document.createElement("style"),b="transition: all .3s ease-out;";css=[".livejs-loading * { ",b," -webkit-",b,"-moz-",b,"-o-",b,"}"].join("");w.setAttribute("type","text/css");g.appendChild(w);w.styleSheet?w.styleSheet.cssText=css:w.appendChild(document.createTextNode(css));r=true},checkForChanges:function(){for(var e in t){if(a[e])continue;c.getHead(e,function(e,a){var o=t[e],s=false;t[e]=a;for(var n in o){var r=o[n],i=a[n],l=a["Content-Type"];switch(n.toLowerCase()){case"etag":if(!i)break;default:s=r!=i;break}if(s){c.refreshResource(e,l);break}}})}},refreshResource:function(e,t){switch(t.toLowerCase()){case"text/css":var a=o[e],n=document.body.parentNode,r=a.parentNode,i=a.nextSibling,l=document.createElement("link");n.className=n.className.replace(/\s*livejs\-loading/gi,"")+" livejs-loading";l.setAttribute("type","text/css");l.setAttribute("rel","stylesheet");l.setAttribute("href",e+"?now="+new Date*1);i?r.insertBefore(l,i):r.appendChild(l);o[e]=l;s[e]=a;c.removeoldLinkElements();break;case"text/html":if(e!=document.location.href)return;case"text/javascript":case"application/javascript":case"application/x-javascript":document.location.reload()}},removeoldLinkElements:function(){var e=0;for(var t in s){try{var a=o[t],n=s[t],r=document.body.parentNode,i=a.sheet||a.styleSheet,l=i.rules||i.cssRules;if(l.length>=0){n.parentNode.removeChild(n);delete s[t];setTimeout(function(){r.className=r.className.replace(/\s*livejs\-loading/gi,"")},100)}}catch(d){e++}if(e)setTimeout(c.removeoldLinkElements,50)}},getHead:function(t,o){a[t]=true;var s=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XmlHttp");s.open("HEAD",t,true);s.onreadystatechange=function(){delete a[t];if(s.readyState==4&&s.status!=304){s.getAllResponseHeaders();var n={};for(var r in e){var i=s.getResponseHeader(r);if(r.toLowerCase()=="etag"&&i)i=i.replace(/^W\//,"");if(r.toLowerCase()=="content-type"&&i)i=i.replace(/^(.*?);.*?$/i,"$1");n[r]=i}o(t,n)}};s.send()}};if(document.location.protocol!="file:"){if(!window.liveJsLoaded)c.heartbeat();window.liveJsLoaded=true}else if(window.console)console.log("Live.js doesn't support the file protocol. It needs http.")})();